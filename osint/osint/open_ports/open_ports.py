import socket


# Function to check for open ports
def check_open_ports(url):
    try:
        ip = socket.gethostbyname(url)
        portsmass = []
        for port in range(1, 65536):
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(1)
            result = sock.connect_ex((ip, port))
            if result == 0:
                print(f'Port {port} is open on {url}')
                print('Vulnerability percentage: 100%')
                portsmass.append({"text": port})
            else:
                print(f'Port {port} is closed on {url}')
                print('Vulnerability percentage: 0%')
                portsmass.append({"text": port})
        return portsmass
    except socket.gaierror as e:
        print(f'Error resolving hostname: {url}')
        print(f'Error message: {e}')
